# Информационные системы - Лабораторная Работы №1-3

## Навигация по проекту
* [Задание](Task.md)
* [Бэк-Энд](backend/src/main/java/com/example/backend)
* [Фронт-Энд](frontend/src)
* [Uml диаграмма](images/UmlDiagram.png) (Представлена старая версия диаграммы, которая соотвествует ЛР1)

## Описание

Проект представляет собой информационную систему, которая позволяет хранить информацию о [людях](images/HumansTable.png "HumansTable") их [автомобилях](images/CarsTable.png "CarsTable") и координатах.
В системе имеются end-points для [добавления](images/AddHumanForm[PreviewPage].png), удаления, редактирования и просмотра данных. Реализован функционал [aудита](images/AuditWindow.png "AuditWindow") и [администрирования](images/AdminRequests.png "AdminRequests").
Также сортировка, фильтрация и поиск по данным и [дополнительный функционал](images/AdditionalFunctionality.png "AdditionalFunctionality") по заданию.
В рамках лр2 и лр3 была добавлена функция [импорта файлов](images/ImportPage.png) с [просмотром истории импорта](images/HistoryPage.png) и возможностью скачать импортированные файлы обратно. На [скриншоте с формой импорта](/images/ImportPage.png) можно заметить флаг "Distributed mode", он как раз отвечает за то, будет ли транзакция через *RabbitMQ* передана consumer-приложениям, или она будет выполняться на головной машине.

## Инструкция по развертыванию
Так как DockerFile головного модуля не был протестирован, рекомендуется запускать его локально на своей машине (При желании DockerFile можно допилить, у автору просто лень).

* На машине необходимо наличие *Java 17* и выше.
* Необходимо наличие *Docker version 27.4.0*
* На машину необходимо установить *Node.js (npm -v 10.9.2; node -v v22.14.0)*
* Для развертывания всех зависимостей проекта (я говорю не gradle библиотеках), достаточно запустить скрипт **dependencies.bat[sh]** в папке scripts для соотвествующей ОС (Linux, Windows). Скрипт развернет базу данных, Consumers приложения, MinIO и RabbitMQ. Также скрипт сам инициализирует npm проект, установит все зависимости для фронта и скомпилирует его.
* Для запуска приложения запустите скрипт **run.bat[sh]**.

## Примечания

* Изначально проект инициализируется с пустой базой данных. В связи с этим, приложение подразумевает создание первого админа вручную через заполнения формы регистрации. (Для остальных админов сначала отправляется запрос всем существующим админам, а затем, по принятии запроса админ будет окончательно зарегистрирован.

* Приложение доступно по адресу /localhost:8080.



## Backend
* Написан на *Java*, использует *Spring Boot*.
* Сборка и управление зависимостей - *Gradle*.
* В качестве базы данных используется *PostgreSQL*. Для работы с базой данных используется *Spring Data JPA* и *Hibernate*.
* Для регистрации и авторизации используется *Spring Security* (через логин и пароль). Для хранения паролей используется *SHA256*.
* Аутентификация происходит через *JSESSIONID*. Имеются роли - *ADMIN* и *USER*.
* Для управления коллекциями объектов и остальной логики используется *Spring MVC*.
* Для поддержания актуальности данных используются *Spring Message Broker* и *STOMP* (WebSockets).
* *CSRF-tokens* для защиты от CSRF-атак.
* Добавлена функция импорта xlsx файлов, а также импорт архивов.
* Для хранения файлов в приложение добавлена поддержка S3-совместимой базы данных *MinIO*.
* Для реализации двухфазных коммитов(MinIO + Postgresql) было изучено и применено *Java Transaction API*, его реализация в Spring.
* В рамках дополнительного задания для оптимизации импорта файла была внедрена распределенная обработка данных при импорте файлов и очередь задач *RabbitMQ*.
* Для контейнеризации отдельних частей приложения, таких как *MinIO*, *PostgreSQL*, *RabbitMQ* использовался *Docker*.
## Frontend

* Написан на *Vue*.
* Для лаконичного дизайна использовал *TailWindCss* - фреймворк для CSS.
* Для ajax запросов использовал *Jquery*.
